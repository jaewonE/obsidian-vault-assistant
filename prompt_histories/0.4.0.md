# Prompt history for v0.4.0

Key questions/requests asked in this session (chronological):

1. Before implementation, review `README.md`, `AGENTS.md`, and `CHANGELOGS.md`.
2. Plan and implement v0.4.0 `Add Commands` path-specification behavior using `@` / `@@` (search behavior, path expansion rules, UI requirements, source merge with BM25).
3. Clarify whether an additional Obsidian plugin named `composer` is required.
4. Improve UI: filename/path layout in mention list, keyboard navigation pattern based on provided `modal.ts` / `main.ts`, and richer file-type icons.
5. Re-implement UI fixes because previous attempt failed: input focus behavior, left-aligned icon/name/path order, icon verification, space/underscore search handling.
6. Fix remaining issues: arrow keys not working and icon vertical alignment.
7. Analyze why `DagPickerModal` keyboard approach worked there but failed in chat; determine whether the original input-focus bug was caused by modal-style focus handling.
8. Fix visual state issue where keyboard selection highlight was unclear compared with mouse hover.
9. Adjust highlight so keyboard-selected item changes background like hover (not just border).
10. Add feature: when explicit sources are selected, add a persistent switch for whether BM25 should also run; save state in `data.json`; ensure history sources are still carried over.
11. Explain, from code, how overlap between previous-conversation sources and current custom sources is handled in the same tab.
12. Ensure analysis is provided after implementation work is completed.
13. Change behavior to always show a `Search vault` toggle (regardless of `@` sources), default enabled, persisted in `data.json`, and usable for continuing same-tab conversations without adding new sources.
14. Investigate recurring `MCP error -32001: Request timed out` during `@` source-heavy flows, especially code summarization; verify whether timeout setting is actually applied and propose/fix timeout handling.
15. Confirm whether setting query timeout to `300` means 5 minutes are actually applied.
16. Final request: set default query timeout to `300`, ensure timeout is pre-applied at startup where needed, update `README.md` / `CHANGELOGS.md` / `AGENTS.md` for finalized v0.4.0, and record this prompt history.
